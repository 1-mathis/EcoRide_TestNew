{% extends 'base.html.twig' %}

{% block title %}Admin — EcoRide{% endblock %}

{% block stylesheets %}
  {{ parent() }}
  <style>
    .admin-shell {
      --bg: #0f1220;
      --panel: #171b2e;
      --line: rgba(255, 255, 255, .06);
      --txt: #eef1fb;
      --muted: #a9b0c3;
      --accent: #7c6cff;
      --accent-2: #50d8a8;
      --danger: #ff6b6b;
      --shell-max: 1680px;
      --content-max: 1360px;
      --sidebar-w: 240px;
    }

    .admin-shell {
      max-width: var(--shell-max);
      margin: 28px auto;
      padding: 0 18px;
      color: var(--txt);
    }

    .admin-layout {
      display: grid;
      grid-template-columns: var(--sidebar-w) 1fr;
      gap: 20px;
      align-items: start;
      justify-content: center;
    }

    .admin-card {
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: 16px;
    }

    .admin-sidebar {
      padding: 16px;
      position: sticky;
      top: 18px;
      height: fit-content;
    }

    .admin-content {
      padding: 18px;
    }

    .admin-content-inner {
      max-width: var(--content-max);
      margin: 0 auto;
    }

    .admin-nav a {
      display: block;
      padding: 10px 12px;
      margin-bottom: 6px;
      border-radius: 10px;
      color: var(--txt);
      text-decoration: none;
      border: 1px solid transparent;
    }

    .admin-nav a.active,
    .admin-nav a:hover {
      background: rgba(255, 255, 255, .05);
      border-color: var(--line);
    }

    .page-title {
      font-size: 1.4rem;
      margin: 4px 0 16px;
    }

    .toolbar {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
      margin: 6px 0 16px;
    }

    .kpis {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 12px;
      margin-bottom: 16px;
    }

    .kpi {
      padding: 14px;
      border-radius: 14px;
      background: rgba(255, 255, 255, .03);
      border: 1px dashed var(--line);
    }

    .kpi .label {
      color: var(--muted);
      font-size: .9rem;
    }

    .kpi .value {
      font-size: 1.6rem;
      font-weight: 700;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: 380px 1fr;
      gap: 16px;
    }

    .form {
      display: grid;
      gap: 10px;
    }

    .form label {
      font-size: .9rem;
      color: var(--muted);
    }

    .form input {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid var(--line);
      background: #0f1326;
      color: var(--txt);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 12px;
      border: 1px solid transparent;
      background: var(--accent);
      color: #fff;
      cursor: pointer;
    }

    .btn:hover {
      filter: brightness(1.06);
    }

    .btn.secondary {
      background: transparent;
      border-color: var(--line);
      color: var(--txt);
    }

    .btn.success {
      background: var(--accent-2);
    }

    .btn.danger {
      background: var(--danger);
    }

    .table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0 10px;
      table-layout: fixed;
    }

    .table thead th {
      font-weight: 600;
      color: var(--muted);
      text-align: left;
      padding: 8px 12px;
      white-space: nowrap;
    }

    .table tbody tr {
      background: rgba(255, 255, 255, .03);
      border: 1px solid var(--line);
    }

    .table td {
      padding: 10px 12px;
      border-top: 1px solid var(--line);
      border-bottom: 1px solid var(--line);
      vertical-align: middle;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .table tbody tr td:first-child {
      border-left: 1px solid var(--line);
      border-top-left-radius: 12px;
      border-bottom-left-radius: 12px;
    }

    .table tbody tr td:last-child {
      border-right: 1px solid var(--line);
      border-top-right-radius: 12px;
      border-bottom-right-radius: 12px;
    }

    .col-id {
      width: 56px;
    }

    .col-email {
      width: 520px;
    }

    .col-status {
      width: 110px;
    }

    .col-date {
      width: 190px;
    }

    .col-actions {
      width: 300px;
    }

    .actions {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
      flex-wrap: wrap;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(255, 255, 255, .06);
      border: 1px solid var(--line);
      font-size: .86rem;
      white-space: nowrap;
    }

    .badge.ok {
      background: rgba(80, 216, 168, .12);
      border-color: rgba(80, 216, 168, .35);
    }

    .badge.warn {
      background: rgba(255, 107, 107, .12);
      border-color: rgba(255, 107, 107, .35);
    }

    .roles {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .chip {
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(124, 108, 255, .14);
      border: 1px solid rgba(124, 108, 255, .35);
      font-size: .82rem;
      white-space: nowrap;
    }

    .flash {
      padding: 10px 12px;
      border-radius: 12px;
      margin-bottom: 10px;
    }

    .flash-success {
      background: rgba(80, 216, 168, .15);
      border: 1px solid rgba(80, 216, 168, .4);
    }

    .flash-danger {
      background: rgba(255, 107, 107, .15);
      border: 1px solid rgba(255, 107, 107, .4);
    }

    @media (max-width: 980px) {
      .admin-layout {
        grid-template-columns: 1fr;
      }
      .kpis {
        grid-template-columns: 1fr;
      }
      .grid-2 {
        grid-template-columns: 1fr;
      }
      .admin-content-inner {
        max-width: 100%;
      }
      .col-email {
        width: auto;
      }
      .col-actions {
        width: 220px;
      }
    }
  </style>
{% endblock %}

{% block body %}
  <div class="admin-shell">
    <div class="admin-layout">
      <aside class="admin-card admin-sidebar">
        <h3 style="margin:6px 0 12px">Admin</h3>
        <nav class="admin-nav">
          <a
            href="{{ path('admin_dashboard') }}"
            class="{{ app.request.get('_route') starts with 'admin_dashboard' ? 'active' : '' }}"
          >Dashboard</a>
          <a
            href="{{ path('admin_employees_index') }}"
            class="{{ app.request.get('_route') starts with 'admin_employees_' ? 'active' : '' }}"
          >Utilisateurs & Employés</a>
        </nav>
      </aside>
      <section class="admin-card admin-content">
        <div class="admin-content-inner">
          {% for label, messages in app.flashes %}
            {% for m in messages %}
              <div class="flash flash-{{ label }}">{{ m }}</div>
            {% endfor %}
          {% endfor %}
          {% block admin_content %}{% endblock %}
        </div>
      </section>
    </div>
  </div>
{% endblock %}
